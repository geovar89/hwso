<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How We See Other</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3f3f3;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  h1 {
    margin-bottom: 20px;
    text-align: center;
  }

  #downloadBtn {
    margin-bottom: 20px;
    padding: 12px 25px;
    background: #17a2b8;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    width: 200px;
    max-width: 90%;
  }

  #downloadBtn:hover { background: #117a8b; }

  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    max-width: 900px;
    width: 100%;
  }

  .cell {
    background: white;
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-height: 280px;
    transition: all 0.3s ease;
  }

  .cell img {
    max-width: 100%;
    max-height: 200px;
    border-radius: 10px;
    margin-top: 10px;
  }

  .cell input[type="text"] {
    width: 100%;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    box-sizing: border-box;
  }

  .cell button, .upload-label {
    margin: 4px 0;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    color: white;
    width: 100%;
    font-size: 14px;
  }

  .enter-btn { background: #007BFF; }
  .enter-btn:hover { background: #0056b3; }

  .reset-btn { background: #dc3545; }
  .reset-btn:hover { background: #a71d2a; }

  .upload-label {
    background: #28a745;
    display: inline-block;
    cursor: pointer;
    text-align: center;
  }

  .upload-label:hover { background: #1e7e34; }

  .upload-label input { display: none; }

  /* Responsive */
  @media (max-width: 768px) {
    .grid { grid-template-columns: repeat(2, 1fr); }
    .cell { min-height: 250px; }
  }

  @media (max-width: 480px) {
    .grid { grid-template-columns: 1fr; }
    .cell { min-height: 220px; }
  }
</style>
</head>
<body>

<h1>How We See Other</h1>
<button id="downloadBtn">Download Grid as PNG</button>

<div class="grid" id="grid"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
  const categories = [
    'animal', 'place', 'plant', 'character', 
    'season', 'hobby', 'color', 'crystal', 'food'
  ];

  const grid = document.getElementById('grid');

  categories.forEach(category => {
    const cell = document.createElement('div');
    cell.className = 'cell';

    const title = document.createElement('h2');
    title.textContent = category;
    title.style.textTransform = 'capitalize';

    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = 'Paste image URL';

    const img = document.createElement('img');
    img.style.display = 'none';

    const enterBtn = document.createElement('button');
    enterBtn.textContent = 'Enter';
    enterBtn.className = 'enter-btn';
    enterBtn.onclick = () => {
      if (input.value) {
        img.src = input.value;
        img.style.display = 'block';
        input.style.display = 'none';
        enterBtn.style.display = 'none';
        uploadLabel.style.display = 'none';
      }
    };

    const resetBtn = document.createElement('button');
    resetBtn.textContent = 'Reset';
    resetBtn.className = 'reset-btn';
    resetBtn.onclick = () => {
      img.src = '';
      img.style.display = 'none';
      input.style.display = 'block';
      enterBtn.style.display = 'inline-block';
      uploadLabel.style.display = 'inline-block';
    };

    const uploadInput = document.createElement('input');
    uploadInput.type = 'file';
    uploadInput.accept = 'image/*';
    uploadInput.onchange = (e) => {
      if (e.target.files && e.target.files[0]) {
        const reader = new FileReader();
        reader.onload = (event) => {
          img.src = event.target.result;
          img.style.display = 'block';
          input.style.display = 'none';
          enterBtn.style.display = 'none';
          uploadLabel.style.display = 'none';
        }
        reader.readAsDataURL(e.target.files[0]);
      }
    };

    const uploadLabel = document.createElement('label');
    uploadLabel.textContent = 'Upload';
    uploadLabel.className = 'upload-label';
    uploadLabel.appendChild(uploadInput);

    cell.appendChild(title);
    cell.appendChild(input);
    cell.appendChild(enterBtn);
    cell.appendChild(resetBtn);
    cell.appendChild(uploadLabel);
    cell.appendChild(img);

    grid.appendChild(cell);
  });

  // Download grid as PNG
  
  document.getElementById('downloadBtn').onclick = () => {
    // Αποθήκευση τωρινών τιμών CSS
    const oldGridTemplate = grid.style.gridTemplateColumns;

    // Αναγκαστικά 3x3 για την λήψη
    grid.style.gridTemplateColumns = 'repeat(3, 1fr)';

    html2canvas(grid, {backgroundColor: null}).then(canvas => {
      const link = document.createElement('a');
      link.download = 'grid.png';
      link.href = canvas.toDataURL();
      link.click();

      // Επαναφορά responsive διάταξης
      grid.style.gridTemplateColumns = oldGridTemplate;
    });
  };
  
</script>

</body>
</html>
